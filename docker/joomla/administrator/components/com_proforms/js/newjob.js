// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// @license: Mad4Media Javascipt License - copyright Mad4Media - Fahrettin Kutyol - All rights reserved    ++
// (re-) publishing or forking for any purpose of commercial or non-commercial use is not allowed.		   ++
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
var cTab=new M4JTab(["m4jMainConfig","m4jEmailTab","m4jIntroText","m4jMainText","m4jAfterSending","m4jPaypalTab","m4jCodeTab","m4jOptTab","m4jCustomizeTab"]);dojo.addOnLoad(function(){_S("configTabWrap").height=(cTab.getMaxHeight()+18)+"px";window.setTimeout(function(){_S("configTabWrap").height=(cTab.getMaxHeight()+18)+"px";},2000);});function codeTab(_1,no){dojo.byId("tabHI").id="";_1.id="tabHI";_S("secondEditArea").left="auto";if(no){_S("firstEditArea").left="-9999em";_S("secondEditArea").left="auto";}else{_S("firstEditArea").left="auto";_S("secondEditArea").left="-9999em";}};function addTemplate(_2){mInfoTipShadow.style.display="none";mInfoTipArrow.style.left="-9999em";mInfoTipWrap.style.left="-9999em";var _3=dojo.query("#m4jSelectedTemplates input").length;var _4="valueContainer_"+_2.getAttribute("fid");if(_2.parentNode.id!="m4jSelectedTemplates"){if(!(_2.getAttribute("usermail")==1&&m4jHasUserMail)){if(_3>0){return false;}dojo.addClass(_2,"m4jSelected");dojo.byId(_4).innerHTML="<input type=\"hidden\" name=\"fid\" value=\""+_2.getAttribute("fid")+"\"></input>";dojo.byId("m4jSelectedTemplates").appendChild(_2);if(_2.getAttribute("usermail")==1){userMailDisable();dojo.byId("m4jSwitchConfirmation").style.visibility="visible";}}else{m4jUserMailPrompt();}}else{dojo.removeClass(_2,"m4jSelected");dojo.byId(_4).innerHTML="";dojo.byId("m4jTemplateSelection").appendChild(_2);if(_2.getAttribute("usermail")==1){checkUserMail();}}};function resetTemplate(){var _5=dojo.byId("m4jSelectedTemplates");var _6=dojo.query(".m4jSelect",_5);_6.forEach(function(_7){var _8="valueContainer_"+_7.getAttribute("fid");dojo.removeClass(_7,"m4jSelected");dojo.byId(_8).innerHTML="";dojo.byId("m4jTemplateSelection").appendChild(_7);});checkUserMail();};function userMailDisable(){m4jHasUserMail=true;var _9=dojo.byId("m4jTemplateSelection");var _a=dojo.query(".m4jSelect",_9);_a.forEach(function(_b){if(_b.getAttribute("usermail")==1){dojo.addClass(_b,"m4jSelectDisabled");}});};function checkUserMail(){var _c=false;var _d=dojo.byId("m4jSelectedTemplates");var _e=dojo.query(".m4jSelect",_d);_e.forEach(function(_f){if(_f.getAttribute("usermail")==1){_c=true;}});if(m4jHasUserMail&&!_c){var _10=dojo.query(".m4jSelect",dojo.byId("m4jTemplateSelection"));_10.forEach(function(_11){dojo.removeClass(_11,"m4jSelectDisabled");dojo.byId("m4jSwitchConfirmation").style.visibility="hidden";});}else{if(!m4jHasUserMail&&_c){var _10=dojo.query(".m4jSelect",dojo.byId("m4jTemplateSelection"));_10.forEach(function(_12){if(_12.getAttribute("usermail")==1){dojo.addClass(_12,"m4jSelectDisabled");}dojo.byId("m4jSwitchConfirmation").style.visibility="visible";});}}m4jHasUserMail=_c;};function evalProcess(_13){var _14=dojo.query(".m4jEmailTab",dojo.byId("m4jMain"));if(_13.value==1){_S(_14[0]).display="none";}else{_S(_14[0]).display="";}_S("disableOptIn").display=(_13.value!=0)?"none":"block";};function isOptIn(){var _15=dojo.byId("m4jProcess").value;return (_15==2);};function changeASArrowStyle(_16,to){var _17="arrow"+to;m4jChangeArrowStyle.id=_17;dojo.byId("m4jAfterSendingField").value=to;dojo.byId("asSelected").id="";_16.id="asSelected";switch(to){case 0:_S("m4jRedirectWrap").visibility="hidden";_S("m4jCustomTextWrap").display="block";_S("m4jCustomTextHeader").display="none";break;case 1:_S("m4jRedirectWrap").visibility="visible";_S("m4jCustomTextWrap").display="block";_S("m4jCustomTextHeader").display="none";break;case 2:_S("m4jRedirectWrap").visibility="hidden";_S("m4jCustomTextWrap").display="none";_S("m4jCustomTextHeader").display="block";break;}};function evalRequired(){var _18=false;var _19="";var _1a=dojo.byId("title");if(_1a.value==""){_18=true;_19+=mText.errornotitle+"\n\n";}var _1b=dojo.query("#m4jSelectedTemplates a.m4jSelected");if(_1b.length==0){_18=true;_19+=mText.errornotemplate;}if(_18){alert(_19);return false;}else{return true;}};function setAliasWindow(_1c){_S("m4jSelectAliasForHidden").display=_1c?"block":"none";_S("m4jSelectAliasForHiddenClose").display=_1c?"block":"none";_S("m4jSelectAliasForHiddenOpen").display=_1c?"none":"block";};var isAliasWindow=false;function showAliasWindow(_1d){isAliasWindow=!isAliasWindow;if(isAliasWindow){setAliasWindow(1);var _1e=true;var _1f=XHRALIAS;var _20=dojo.query("#m4jSelectedTemplates a.m4jSelected");dojo.forEach(_20,dojo.hitch(this,function(_21){if(_1e){_1f+=_21.getAttribute("fid");_1e=false;}else{_1f+=","+_21.getAttribute("fid");}}));_1f+="&editor="+_1d;if(isOptIn()){_1f+="&optin=1&optout=1";}_S("m4jSelectAliasForHidden").display="block";_LoadTo(_1f,"m4jSelectAliasForHiddenContent");}else{setAliasWindow(0);}};function setAliasWindow2(_22){_S("m4jSelectAliasForCustomText").display=_22?"block":"none";_S("m4jSelectAliasForCustomTextClose").display=_22?"block":"none";_S("m4jSelectAliasForCustomTextOpen").display=_22?"none":"block";};var isAliasWindow2=false;function showAliasWindow2(_23){isAliasWindow2=!isAliasWindow2;if(isAliasWindow2){setAliasWindow2(1);var _24=true;var _25=XHRALIAS;var _26=dojo.query("#m4jSelectedTemplates a.m4jSelected");dojo.forEach(_26,dojo.hitch(this,function(_27){if(_24){_25+=_27.getAttribute("fid");_24=false;}else{_25+=","+_27.getAttribute("fid");}}));_25+="&editor="+_23;_S("m4jSelectAliasForCustomText").display="block";_LoadTo(_25,"m4jSelectAliasForCustomTextContent");}else{setAliasWindow2(0);}};function setAliasWindow3(_28){_S("m4jSelectAliasForOptIn").display=_28?"block":"none";_S("m4jSelectAliasForOptInClose").display=_28?"block":"none";_S("m4jSelectAliasForOptInOpen").display=_28?"none":"block";};var isAliasWindow3=false;function showAliasWindow3(_29){isAliasWindow3=!isAliasWindow3;if(isAliasWindow3){setAliasWindow3(1);var _2a=true;var _2b=XHRALIAS;var _2c=dojo.query("#m4jSelectedTemplates a.m4jSelected");dojo.forEach(_2c,dojo.hitch(this,function(_2d){if(_2a){_2b+=_2d.getAttribute("fid");_2a=false;}else{_2b+=","+_2d.getAttribute("fid");}}));_2b+="&editor="+_29;_2b+="&optout=1";_S("m4jSelectAliasForOptIn").display="block";_LoadTo(_2b,"m4jSelectAliasForOptInContent");}else{setAliasWindow3(0);}};function setAliasWindow4(_2e){_S("m4jSelectAliasForOptOut").display=_2e?"block":"none";_S("m4jSelectAliasForOptOutClose").display=_2e?"block":"none";_S("m4jSelectAliasForOptOutOpen").display=_2e?"none":"block";};var isAliasWindow4=false;function showAliasWindow4(_2f){isAliasWindow4=!isAliasWindow4;if(isAliasWindow4){setAliasWindow4(1);var _30=true;var _31=XHRALIAS;var _32=dojo.query("#m4jSelectedTemplates a.m4jSelected");dojo.forEach(_32,dojo.hitch(this,function(_33){if(_30){_31+=_33.getAttribute("fid");_30=false;}else{_31+=","+_33.getAttribute("fid");}}));_31+="&editor="+_2f;_31+="&optin=1";_S("m4jSelectAliasForOptOut").display="block";_LoadTo(_31,"m4jSelectAliasForOptOutContent");}else{setAliasWindow4(0);}};function m4jAdd2Editor(tag,_34){if(typeof IeCursorFix=="function"){IeCursorFix();}jInsertEditorText(tag,_34);return false;};function showOpt(out){if(out){_S("m4jOptOut").display="block";_S("m4jOptIn").display="none";dojo.query("#optInTab").removeClass("active");dojo.query("#optOutTab").addClass("active");}else{_S("m4jOptOut").display="none";_S("m4jOptIn").display="block";dojo.query("#optOutTab").removeClass("active");dojo.query("#optInTab").addClass("active");}};function toggleTaxType(val){val=parseInt(val);var _35=dojo.byId("tax_currency").style;var _36=dojo.byId("tax_percent").style;if(val==2){_35.display="none";_36.display="block";}else{_35.display="block";_36.display="none";}};