// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
// @license: Mad4Media Javascipt License - copyright Mad4Media - Fahrettin Kutyol - All rights reserved    ++
// (re-) publishing or forking for any purpose of commercial or non-commercial use is not allowed.		   ++
// ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
function comparisonDummy(){};comparisonDummy.prototype={equals:function(){return this;},lower:function(){return this;},lowerOrEqual:function(){return this;},higher:function(){return this;},higherOrEqual:function(){return this;},errorTextIfNot:function(){return this;}};function MCompare(_1){this.element=_1;this.name="compare";};MCompare.prototype={equals:function(el){this.element2=el;this.action="==";return this;},lower:function(el){this.element2=el;this.action="<";return this;},lowerOrEqual:function(el){this.element2=el;this.action="<=";return this;},higher:function(el){this.element2=el;this.action=">";return this;},higherOrEqual:function(el){this.element2=el;this.action=">=";return this;},errorTextIfNot:function(_2){this.onError=_2;return this;},lowerThan:function(el){return this.lower(el);},higherThan:function(el){return this.higher(el);},deleteHandle:function(){var w1=(this.node1.formType!="checkbox")?this.node1:this.node1.parentNode;var w2=(this.node2.formType!="checkbox")?this.node2:this.node2.parentNode;if(this.node1.validationError){this.node1.bubbleInfo=this.node1.bubbleInfo.replace("<br>"+this.onError,"").replace(this.onError,"");}else{m4jKillBubbleHandle(w1,this.node1);}if(this.node2.validationError){this.node2.bubbleInfo=this.node2.bubbleInfo.replace("<br>"+this.onError,"").replace(this.onError,"");}else{m4jKillBubbleHandle(w2,this.node2);}dojo.disconnect(this.node1.compareOnChangeHandle);this.node1.compareOnChangeHandle=undefined;dojo.disconnect(this.node2.compareOnChangeHandle);this.node2.compareOnChangeHandle=undefined;},checkCondition:function(){var _3=0;var _4=_byName("m4j-"+this.element);var _5=_byName("m4j-"+this.element2);if(_4==undefined||_5==undefined){return 0;}this.node1=_4;this.node2=_5;switch(this.action){case "==":if(!(_4.value==_5.value)){_3=1;}break;case "<":if(!(_4.value<_5.value)){_3=1;}break;case ">":if(!(_4.value>_5.value)){_3=1;}break;case "<=":if(!(_4.value<=_5.value)){_3=1;}break;case ">=":if(!(_4.value>=_5.value)){_3=1;}break;default:return 0;break;}if(_4.compare==undefined){_4.compare=this;}if(_5.compare==undefined){_5.compare=this;}if(!_4.compareOnChangeHandle){_4.compareOnChangeHandle=dojo.connect(_4,"onchange",compareOnChange);}if(!_5.compareOnChangeHandle){_5.compareOnChangeHandle=dojo.connect(_5,"onchange",compareOnChange);}if(_3){var w1=(_4.formType!="checkbox")?_4:_4.parentNode;var w2=(_5.formType!="checkbox")?_5:_5.parentNode;if(!w1.errorOverHandle&&m4jShowTooltip){_4.errorOverHandle=dojo.connect(_4,"onmouseover",showErrorTooltip);_4.errorOutHandle=dojo.connect(_4,"onmouseout",hideErrorTooltip);_4.bubbleInfo=this.onError;m4jHighliteError(w1,_4);}else{if(_4.bubbleInfo.indexOf(this.onError)==-1){_4.bubbleInfo+="<br>"+this.onError;}}if(!w2.errorOverHandle&&m4jShowTooltip){_5.errorOverHandle=dojo.connect(_5,"onmouseover",showErrorTooltip);_5.errorOutHandle=dojo.connect(_5,"onmouseout",hideErrorTooltip);_5.bubbleInfo=this.onError;m4jHighliteError(w2,_5);}else{if(_5.bubbleInfo.indexOf(this.onError)==-1){_5.bubbleInfo+="<br>"+this.onError;}}}return _3;}};function compareOnChange(e){if(this.compare==undefined){return true;}var _6=this.compare.checkCondition();if(!_6){this.compare.deleteHandle();}return true;};function m4jHighliteError(_7,el){switch(_7.formType){case "select":if(_Browser.IE&&_Browser.IEVersion()<8){el.parentNode.style.border="1px solid "+errorColor;}else{el.style.borderColor=errorColor;}break;case "checkbox":el.style.border="1px solid "+errorColor;break;default:el.style.borderColor=errorColor;break;}};function m4jKillBubbleHandle(_8,el){switch(_8.formType){case "select":if(_Browser.IE&&_Browser.IEVersion()<8){el.parentNode.style.border="";}else{el.style.borderColor="";}break;case "checkbox":el.style.border="";bubbleWrap.style.left="-9999em";break;default:el.style.borderColor="";break;}el.validationError=0;dojo.disconnect(el.errorOverHandle);dojo.disconnect(el.errorOutHandle);el.errorOverHandle=undefined;el.errorOutHandle=undefined;};var m4jAllowSubmission=false;var m4jCancelSubmit=false;function validateField(_9){var _a=false;var _b=false;var _c=_9.validateType;var _d="";var el=(_9.formType!="checkbox")?_9:_9.parentNode;el.bubbleInfo="";if(_c>999){_c-=1000;switch(_9.formType){case "select":case "textarea":case "field":if(_9.value==""){_b=true;el.bubbleInfo=MText.required+"<br/>";}else{el.bubbleInfo=el.bubbleInfo.replace(MText.required+"<br/>","");}break;case "checkbox":if(_9.checked==""){_b=true;el.bubbleInfo=MText.required+"<br/>";}else{el.bubbleInfo=el.bubbleInfo.replace(MText.required+"<br/>","");}break;}}switch(_c){case 1:if(checkRegEx(_9.value,"[^\\D\\s]")||_b){_a=true;el.bubbleInfo+=MText.alphabetic;}_d=MText.alphabetic;break;case 2:if(checkRegEx(_9.value,"[^0-9.]")||_b){_a=true;el.bubbleInfo+=MText.numeric;}_d=MText.numeric;break;case 3:if(checkRegEx(_9.value,"[^0-9]")||_b){_a=true;el.bubbleInfo+=MText.integer;}_d=MText.integer;break;case 4:var _e=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,6})$/;if(!_e.test(_9.value)&&_9.value.length!=0||_b){_a=true;el.bubbleInfo+=MText.email;}_d=MText.email;break;case 5:var _e=/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/;if(!_e.test(_9.value)&&_9.value.length!=0||_b){_a=true;el.bubbleInfo+=MText.url;}_d=MText.url;break;case 6:if(checkRegEx(_9.value,"[^A-Za-z0-9\\s]")||_b){_a=true;el.bubbleInfo+=MText.alphanumeric;}_d=MText.alphanumeric;break;default:break;}if(_a||_b){globalError=true;m4jHighliteError(_9,el);el.validationError=1;if(!_9.errorOverHandle&&m4jShowTooltip){el.errorOverHandle=dojo.connect(el,"onmouseover",showErrorTooltip);el.errorOutHandle=dojo.connect(el,"onmouseout",hideErrorTooltip);}}else{if(el.errorOverHandle){if(el.compare){el.bubbleInfo=el.bubbleInfo.replace(_d+"<br>","").replace(_d,"");}else{m4jKillBubbleHandle(_9,el);}el.validationError=0;}}};function checkRegEx(_f,_10){var pos=_f.search(_10);if(pos!=-1){return true;}else{return false;}};var m4jValidationFunctions=new Array();function addValidationFunction(_11){m4jValidationFunctions.push(_11);};var globalError=false;var m4jForm=dojo.byId("m4jForm");m4jForm.onsubmit=function(){if(m4jCancelSubmit){return false;}if(m4jAllowSubmission){return true;}globalError=false;var _12=new Array();if(PROFORMS_USE_JS_VALIDATION){var _13=m4jForm.getElementsByTagName("INPUT");var _14=m4jForm.getElementsByTagName("TEXTAREA");for(t=0;t<_13.length;t++){var alt=Number(_13[t].alt);if(alt>0){if(_13[t].type=="checkbox"){_13[t].formType="checkbox";}else{_13[t].formType="field";}_13[t].validateType=alt;_12.push(_13[t]);_13[t].errorChangeHandle=dojo.connect(_13[t],"onchange",function(){validateField(this);});}}for(t=0;t<_14.length;t++){var _15=Number(_14[t].lang);if(_15>0){_14[t].formType="textarea";_14[t].validateType=_15;_12.push(_14[t]);_14[t].errorChangeHandle=dojo.connect(_14[t],"onchange",function(){validateField(this);});}}for(t=0;t<_12.length;t++){validateField(_12[t]);}var _16=m4jForm.getElementsByTagName("SELECT");for(t=0;t<_16.length;t++){var _15=Number(_16[t].lang);if(_15>0){_16[t].formType="select";_16[t].validateType=_15;_12.push(_16[t]);_16[t].errorChangeHandle=dojo.connect(_16[t],"onchange",function(){bubbleWrap.style.left="-9999em";validateField(this);});validateField(_16[t]);}}var _17=dojo.query("div.m4jRadioWrap, div.m4jCheckboxWrap");_17.forEach(function(_18){m4jEvalWrap(_18);});var _19=proforms.comparisonArray;dojo.forEach(_19,dojo.hitch(this,function(com){if(com.checkCondition()){globalError=true;}}));}var _1a=m4jValidationFunctions.length;for(var t=0;t<_1a;t++){var _1b=(typeof m4jValidationFunctions[t]==="string")?m4jValidationFunctions[t]:null;if(_1b&&(dojo.isFunction(window[_1b])||dojo.isObject(window[_1b]))){var _1c=window[_1b]();if(_1c){globalError=true;}}}if(globalError){alert(MText.errorPrompt);return false;}else{return true;}};function m4jChecker(_1d){var _1e=false;var _1f=_1d.getElementsByTagName("INPUT");for(t=0;t<_1f.length;t++){if(!_1f[t].wrap){_1f[t].wrap=_1d;_1f[t].errorChangeHandle=dojo.connect(_1f[t],"onclick",function(){m4jEvalWrap(this.wrap);});}if(_1f[t].checked!=""){_1e=true;}}return _1e;};function m4jEvalWrap(_20){var _21=Number(_20.lang);if(_21>999){var _22=m4jChecker(_20);if(!_22){_20.style.border="1px solid "+errorColor;_20.bubbleInfo=MText.required+"<br/>";if(!_20.errorOverHandle){_20.errorOverHandle=dojo.connect(_20,"onmouseover",showErrorTooltip);_20.errorOutHandle=dojo.connect(_20,"onmouseout",hideErrorTooltip);globalError=true;}}else{_20.style.border="";_20.bubbleInfo="";if(_20.errorOverHandle){dojo.disconnect(_20.errorOverHandle);dojo.disconnect(_20.errorOutHandle);_20.errorOverHandle=undefined;_20.errorOutHandle=undefined;bubbleWrap.style.left="-9999em";}}}};var showErrorTooltip=function(e){var bW=bubbleWrap;dojo.byId("bubble_tooltip_content").innerHTML=this.bubbleInfo;var _23=_ViewportOffset(this,true);var _24=_docScroll(this);_23.t+=_24.top;_23.l+=_24.left;var _25=_Dimensions(bW);var top=_23.t-_25.height+5;var _26=(_23.l+_23.w)-140;bW.style.top=top+"px";bW.style.left=_26+"px";};var hideErrorTooltip=function(e){bubbleWrap.style.left="-9999em";};function m4jEvalReset(){var _27=dojo.query("input,select,textarea",m4jForm);_27.forEach(function(_28){if(_28.errorOverHandle){dojo.disconnect(_28.errorOverHandle);dojo.disconnect(_28.errorOutHandle);_28.errorOverHandle=undefined;_28.errorOutHandle=undefined;bubbleWrap.style.left="-9999em";switch(_28.formType){case "select":if(_Browser.IE&&_Browser.IEVersion()<8){_28.parentNode.style.border="";}else{_28.style.borderColor="green";}break;case "checkbox":_28.style.border="";bubbleWrap.style.left="-9999em";break;default:_28.style.borderColor="";break;}_28.bubbleInfo="";}if(_28.wrap){if(_28.formType=="select"&&(_Browser.IE&&_Browser.IEVersion()>=8)){return;}_28.wrap.style.border="";if(_28.wrap.errorOverHandle){dojo.disconnect(_28.wrap.errorOverHandle);dojo.disconnect(_28.wrap.errorOutHandle);_28.wrap.errorOverHandle=undefined;_28.wrap.errorOutHandle=undefined;}}});};dojo.addOnLoad(function(){dojo.connect(dojo.byId("m4jResetButton"),"onclick",m4jEvalReset);});