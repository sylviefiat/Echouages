;!function(a){a.fn.jdomAjax=function(b){var d="defaults";"undefined"!=typeof b.plugin&&(d=b.plugin);var e=a.extend({},a.fn.jdomAjax[d],b);e.data||(e.data=new Object);var f=e.data;if("undefined"!=typeof e.token&&(f.token=e.token),"undefined"!=typeof e.namespace){var g=e.namespace.split(".");f.option="com_"+g[0],f.view=g[1],f.layout=g[2],f.render=g[3]?g[3]:""}if("undefined"!=typeof e.vars)for(var h in e.vars)f[h]=e.vars[h];return e.initialize(this),e},a.fn.jdomAjax.hook={domContents:null,domSpinner:null,domMessages:null,initialize:function(a){this.domInit(a),this.request()},domInit:function(b){if(this.domContents=b,null==this.domMessages){var c=a(b).parents("body")[0];this.domMessages=a(c).find("#system-message-container")}null==this.domSpinner&&(this.domSpinner=b)}}}(jQuery),function(a){a.fn.jdomAjax.ajax=a.extend({},a.fn.jdomAjax.hook,{url:"index.php?tmpl=component",method:"POST",data:null,dom:null,token:parseInt(9999999999*Math.random()),loadingStart:function(){a("<div/>",{"class":"jdom-ajax-spinner"}).appendTo(a(this.domSpinner))},loadingEnd:function(){a(this.domSpinner).find(".jdom-ajax-spinner").remove()},request:function(){switch(this.loadingStart(),"undefined"!=typeof this.format&&(this.result=this.format),this.format=this.result,this.format){case"JSON":this.url="index.php?return=json";break;case"HTML":this.url="index.php?tmpl=component"}var b=this;a.ajax({type:this.method,url:this.url,data:this.data,cache:!1,dataType:this.format,success:function(a,c,d){b.successXHR(a,c,d)},error:function(a,c,d){b.errorXHR(a,c,d)}})},errorXHR:function(a,b,c){this.loadingEnd();var d=this.transaction.createResponse();this.transaction.createException(d,"error",c),this.transaction.outputExceptions(this,d)},successXHR:function(b){this.loadingEnd();var e=this.domContents,g=!1;if(a.isPlainObject(b))g=!0;else if("JSON"==this.format)try{b=a.parseJSON(b),g=!0}catch(h){}var i=null;if(g){if(i=this.hookResponse(b),this.transaction.isError(i))return this.onError(i),void 0;this.onBeforeSuccess(e,i),this.successObject(e,i)}else i=this.transaction.createResponse(),this.transaction.setHtml(i,b),this.onBeforeSuccess(e,i),this.successHTML(e,i);this.onAfterSuccess(e,i)},successHTML:function(b,c){var d=this;a(b).html("").html(c.response.html),a(b).ready(function(){"undefined"!=typeof d.ready&&d.ready(b,c)})},successObject:function(a,b){this.transaction.outputExceptions(this,b)},onBeforeSuccess:function(){},onAfterSuccess:function(){},onError:function(a){this.transaction.outputExceptions(this,a)},hookResponse:function(b){var c={};if(!a.isPlainObject(b))return c=this.transaction.createResponse(),this.transaction.createException(c,"error","Object expected"),this.transaction.outputExceptions(this,c),void 0;if(this.debug&&(console.log("HHR response:"),console.log(b)),"undefined"==typeof b.header)c=this.transaction.createResponse(),"undefined"!=typeof b.success&&(c.transaction.result=b.success),"undefined"!=typeof b.messages&&(c.transaction.exceptions=b.messages),"undefined"!=typeof b.data&&(c.response.data=b.data);else switch(c=b,b.header){case"hook-1.0":if("undefined"!=typeof c.transaction&&"undefined"!=typeof c.transaction.exceptions){var d={};a.each(c.transaction.exceptions,function(a,b){var c=message="";"undefined"!=typeof b.type&&(c=b.type),"undefined"!=typeof b.message&&(message=b.message),"undefined"==typeof d[c]&&(d[c]=[]),d[c].push(message)}),c.transaction.exceptions=d}break;case"hook-1.1":}return this.debug&&(console.log("Hook response:"),console.log(c)),c},transaction:{isError:function(a){return"undefined"==typeof a.transaction.result?!1:!a.transaction.result},outputExceptions:function(b,c){var d=c.transaction;if("undefined"!=typeof d.exceptions){var e=[];a.each(d.exceptions,function(b,c){a.each(c,function(a,c){e.push(b.toUpperCase()+" : "+c)})}),b.domMessages.append("<div>"+e.join("<br/>")+"</div>")}else"undefined"!=typeof d.htmlExceptions?b.domMessages.append(d.htmlExceptions):"undefined"!=typeof d.rawExceptions&&""!=d.rawExceptions.trim()&&alert(d.rawExceptions)},createResponse:function(){var a={header:"hook-1.1",transaction:{exceptions:{},result:!0},response:{}};return a},createException:function(a,b,c){a.transaction.exceptions[b]=[],a.transaction.exceptions[b].push(c)},setHtml:function(a,b){a.response={},a.response.html=b}},ready:function(){"function"==typeof callback["_"+this.token]&&(callback["_"+this.token](),callback["_"+this.token]=null)}})}(jQuery),function(a){a.fn.jdomAjax.node=a.extend({},a.fn.jdomAjax.ajax,{})}(jQuery),function(a){a.fn.jdomAjax.defaults=a.extend({},a.fn.jdomAjax.node,{debug:!1,display:function(){},edit:function(){},save:function(){},remove:function(){},addRow:function(){},refresh:function(){},reorder:function(){},renderToolbar:function(){},renderForm:function(){},renderContents:function(){}})}(jQuery),function(a){a.fn.jdomAjax.form=a.extend({},a.fn.jdomAjax.defaults,{method:"POST",format:"JSON",formPrefix:"jform",files:{},form:null,initialize:function(b){this.domInit(b),this.form=b;var c=this,d=!1;a(this.form).find("input[type=file]").each(function(b,e){"undefined"!=typeof e.files[0]&&(c.files[e.name]=e.files[0],a(e).val(""),d=!0)});var e=a(this.form).serialize();if(d){var f=this.onAfterSuccess;this.onAfterSuccess=function(){};var g=this.onBeforeSuccess;this.onBeforeSuccess=function(){this.sendFiles(function(a,b){var b=g(a,b);f(a,b)})}}this.data=e,this.request()},sendFiles:function(b){var c=this;this.debug&&console.log("sendFiles");var d=new FormData;a.each(this.files,function(a,b){d.append(a,b)});var e=this.url+"&"+this.getUrlFromForm();e+="&ignoreMsg=1",a.ajax({url:e,type:"POST",data:d,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(a){c.debug&&(console.log("Response upload:"),console.log(a));var f=c.hookResponse(a);c.transaction.isError(f)?c.onError(f):b(c.domContents,f)},error:function(a,b,d){c.errorXHR(a,b,d)}})},getFormToken:function(){var a=this.form.find("input[type=hidden][value=1]");return 0==a.length?"":a[a.length-1].name},getUrlFromForm:function(b){var c=this;"undefined"==typeof b&&(b=["option","view","layout","task","id","cid","render","tmpl"]);var d=[];return a.each(b,function(a,b){var e=c.form.find("input[type=hidden]#"+b);null!=e.val()&&d.push(b+"="+e.val())}),d.push(this.getFormToken()+"=1"),d.join("&")}})}(jQuery),function(a){"use strict";a.getScripts=function(b,c){a.isArray(b)||(b=[b]),a.when.apply(null,a.map(b,a.getScript)).done(function(){c&&c()})}}(jQuery);var callback={},registerCallback=function(a,b){callback["_"+a]=b};window.jdomAjax={},window.jdomAjax.closeModal=function(){"undefined"!=typeof jQuery.fn.modal&&jQuery(".jdomAjax-modal").modal("hide"),"undefined"!=typeof SqueezeBox&&SqueezeBox.close()},window.jdomAjax.resizeIframe=function(a){a.style.height=a.contentWindow.document.body.scrollHeight+"px"},window.jdomAjax.showMessages=function(a){window.jdomAjax.closeModal(),"string"==typeof a&&(jQuery(".tm-wrapper .uk-container").first().prepend(a),jQuery("#system-message-container").prepend(a)),"function"!=typeof jpopmessages&&(jpopmessages=function(){}),jpopmessages()};