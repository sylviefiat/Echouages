/* *  Project: bootalerts jQuery plugin *  Description: a lightweight replace of the browser alerts/prompts based on bootstrap *  Author: Girolamo Tomaselli http://bygiro.com *  License:	MIT */;!function(a,b,c,d){var e="bootAlertsByGiro",f="plugin_"+e,g={text:{cancel:"Cancel",ok:"Ok"},msgContainerClass:"",msgContainer:'<div class="alert"></div>',dismissalBtn:'<span class="close" data-dismiss="alert">&times;</span>',okBtn:'<span class="btn btn-primary btn-mini bootAlert-ok"></span>',cancelBtn:'<span class="btn btn-danger btn-mini bootAlert-cancel"></span>',inputs:'			<div class="control-group form-vertical">				<div class="control-label" for="text"></div>				<div class="controls">					<input autocomplete="off" type="text" name="text" value="" />				</div>			</div>'},h=function(){this.others_opts={event_initialized:e+"_initialized",event_msg_added:e+"_msg_added",event_msg_removed:e+"_msg_removed",event_modal_show:e+"_modal_show",event_modal_hide:e+"_modal_hide",initialized:!1},this.options=a.extend({},g)},i=function(b){var c,e={};return c=b.find("input,textarea,select").serializeArray(),a.each(c,function(){e[this.name]!==d?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};h.prototype={init:function(c){var d=this;if(!this.options.initialized){a.extend(this.options,c,this.others_opts),this.id=this.element.attr("id");var e={};a("body").append(' 				<div id="windowAlertModal" data-backdrop="static" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true"> 					<div class="modal-body"></div>				</div> 			'),b._originalAlert=b.alert,b.alert=function(a,b,c){return d.alert.call(d,"alert",c,a,b)},b._originalConfirm=b.confirm,b.confirm=function(a,b,c){return d.alert.call(d,"confirm",c,a,b)},b._originalPrompt=b.prompt,b.prompt=function(a,b,c,e){return d.alert.call(d,"prompt",e,a,b,c)},a("#windowAlertModal").on("closed",".alert",function(){if(a("#windowAlertModal").find(".alert").length<=1){var b=a.Event(d.options.event_modal_hide);d.$element.trigger(b,e),a("#windowAlertModal").modal("hide")}}),this.options.initialized=!0;var f=a.Event(this.options.event_initialized);this.$element.trigger(f,e)}},alert:function(b,c,d,e,f){var g=a.extend({},this.options,c),h=this,j=a(g.msgContainer),k={type:b,opt1:d,opt2:e,opt3:f,opts:g};j.find(".alert").addClass(g.msgContainerClass);var l="";switch(b){case"prompt":case"confirm":l+="confirm"==b?d:g.inputs,l+='<p class="bta-btn-container">'+g.cancelBtn+" "+g.okBtn+"</p>",j.html(l),"prompt"!=b||"undefined"!=typeof c&&"undefined"!=typeof c.inputs&&""!=c.inputs||(j.find('[for="text"]').html(d),j.find('[name="text"]').val(e)),j.find(".bootAlert-ok").html(g.text.ok).off("click").on("click",function(){var c=a(this).closest(".alert"),d=i(c);"function"==typeof e&&"confirm"==b?e(!0):"function"==typeof f&&"confirm"!=b&&f(d),c.alert("close")}),j.find(".bootAlert-cancel").html(g.text.cancel).off("click").on("click",function(){var c=a(this).closest(".alert");"function"==typeof e&&"confirm"==b?e(!1):"function"==typeof f&&"confirm"!=b&&f(!1),c.alert("close")}),a(this).closest(".alert").on("closed",function(){var b=a.Event(h.options.event_msg_removed);h.$element.trigger(b,k)});break;case"alert":default:l+=g.dismissalBtn+d,j.html(l),a(this).closest(".alert").on("closed",function(){"function"==typeof e&&e();var b=a.Event(h.options.event_msg_removed);h.$element.trigger(b,k)})}a("#windowAlertModal .modal-body").append(j);var m=a.Event(this.options.event_msg_added);if(this.$element.trigger(m,k),!a("#windowAlertModal").hasClass("in")){var m=a.Event(this.options.event_modal_show);this.$element.trigger(m,k),a("#windowAlertModal").modal()}},addOpts:function(b){a.extend(this.options,b)},destroy:function(){b.alert=b._originalAlert,b.confirm=b._originalConfirm,b.prompt=b._originalPrompt,a("#windowAlertModal").remove(),this.element.data(f,null)}},a.fn[e]=function(b){var c,d;if(this.data(f)instanceof h||this.data(f,new h(this)),d=this.data(f),d.element=this,d.$element=jQuery(this),"undefined"==typeof b||"object"==typeof b)"function"==typeof d.init&&d.init(b);else{if("string"==typeof b&&"function"==typeof d[b])return c=Array.prototype.slice.call(arguments,1),d[b].apply(d,c);a.error("Method "+b+" does not exist on jQuery."+e)}},a(c).ready(function(){a("body").bootAlertsByGiro()})}(jQuery,window,document);