+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=null,this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.prototype=a.extend({},a.fn.modal.Constructor.prototype),b.prototype.constructor=b,b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.lightbox",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.lightbox",'[data-dismiss="lightbox"]',a.proxy(this.hide,this)),this.preloadSize(function(){c.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.lightbox",{relatedTarget:b});d?c.$element.find(".lightbox-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)})}))},b.prototype.hide=function(b,c){b&&b.preventDefault(),b=a.Event("hide.bs.lightbox"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.lightbox"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.lightbox"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal(c),this)).emulateTransitionEnd(300):this.hideModal(c))},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.lightbox").on("focusin.bs.lightbox",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.lightbox",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.lightbox")},b.prototype.hideModal=function(a){var b=this;this.$element.hide(),this.backdrop(function(){b.removeBackdrop(),a||b.$element.trigger("hidden.bs.lightbox")})},b.prototype.backdrop=function(b){var d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.$element.on("click.dismiss.lightbox",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()},b.prototype.preloadSize=function(b){var c=a.Callbacks();b&&c.add(b);var e,f,g,h,i,j,k,l,m,n,d=this;return e=a(window).height(),f=a(window).width(),g=parseInt(d.$element.find(".lightbox-content").css("padding-top"),10),h=parseInt(d.$element.find(".lightbox-content").css("padding-bottom"),10),i=parseInt(d.$element.find(".lightbox-content").css("padding-left"),10),j=parseInt(d.$element.find(".lightbox-content").css("padding-right"),10),k=d.$element.find(".lightbox-content").find("img:first"),k.length<=0?c.fire():(l=new Image,l.onload=function(){l.width+i+j>=f&&(m=l.width,n=l.height,l.width=f-i-j,l.height=n/m*l.width),l.height+g+h>=e&&(m=l.width,n=l.height,l.height=e-g-h,l.width=m/n*l.height),d.$element.find(".lightbox-dialog").css({position:"fixed",width:l.width+i+j,height:l.height+g+h,top:e/2-(l.height+g+h)/2,left:"50%","margin-left":-1*(l.width+i+j)/2}),d.$element.find(".lightbox-content").css({width:l.width+i+j,height:l.height+g+h}),k.css({width:l.width,height:l.height}),c.fire()},l.src=k.attr("src"),void 0)},b.prototype.slide=function(a){var b=this;b.hide(b.event,!0),"next"==a&&b.$element.next(".lightbox").length?b.$element.next(".lightbox").lightbox("show"):"prev"==a&&b.$element.prev(".lightbox").length?b.$element.prev(".lightbox").lightbox("show"):b.$element.trigger("hidden.bs.lightbox")};var c=a.fn.lightbox;a.fn.lightbox=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.lightbox"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.lightbox",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.lightbox.Constructor=b,a.fn.lightbox.noConflict=function(){return a.fn.lightbox=c,this},a(document).on("click.bs.lightbox.data-api",'[data-toggle="lightbox"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("lightbox")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.lightbox(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("click",".lightbox-control",function(b){b.preventDefault();var c=a(this);c.parents(".lightbox").lightbox("slide",a(this).data("lightbox-slide"))}),a(document).on("show.bs.lightbox",".lightbox",function(){a(document.body).addClass("lightbox-open")}).on("hidden.bs.lightbox",".lightbox",function(){a(document.body).removeClass("lightbox-open")})}(window.jQuery);