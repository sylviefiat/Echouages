/*
* @name			extra.js - a little helper for common JS functions
* @version		0.0.1
* @copyright	G. Tomaselli
* @author		Girolamo Tomaselli - http://bygiro.com - girotomaselli@gmail.com
* @license		GNU GPL v3 or later
*/
;function scrollToElement(t){var e={target:null,topoffset:100,parent:"html,body",speed:1300},i=jQuery.extend(e,t);if(void 0!==i.target&&i.target&&(i.target instanceof jQuery||(i.target=jQuery(i.target)),i.target.length>=0)){i.parent instanceof jQuery||""==i.parent||(i.parent=jQuery(i.parent)),i.parent.length<0&&(i.parent=jQuery(e.parent)),i.target.closest(".modal-body").length>0&&(i.parent=i.target.closest(".modal-body"),i.topoffset=0);var n=i.target.offset().top;return"fixed"==i.parent.css("position")||i.parent.is(".modal-body")||(n-=i.parent.offset().top),n-=i.topoffset,i.parent.animate({scrollTop:n},i.speed,function(){}),!1}}function basename(t){var e="";return"string"==typeof t&&(e=t.split(/[\\/]/).pop()),e}function ajaxCall(t){var e={route:"",varsToSend:{},caller:"body",target:"#system-message",method:"html",callBack:function(){},loadingMsg:!0};jQuery(e.target).length>0||(e.target="#system-message-container");var i=jQuery.extend(e,t);i.method=i.method||"html",i.caller instanceof jQuery||(i.caller=jQuery(i.caller)),i.target instanceof jQuery||(i.target=jQuery(i.target));var n=jQuery(".gm-style div").filter(function(){return jQuery(this).css("cursor").toLowerCase().indexOf("maps.gstatic.com")>-1});n.each(function(){jQuery(this).data("originalCursor",jQuery(this).css("cursor"))});var o=function(t){var e=t.transaction.htmlExceptions;void 0!==e?parent.jdomAjax.showMessages(e):(void 0!==t.transaction.rawExceptions&&(e=t.transaction.rawExceptions),t.transaction.result||void 0!==e&&""!=e.trim()||(e="Unknown error"),e&&alert(e))};i.caller.jdomAjax({namespace:i.route,vars:i.varsToSend,loading:function(){if(jQuery("html, body").css("cursor","progress"),n.css("cursor","progress"),i.loadingMsg&&void 0!==jQuery.msg){var t={autoUnblock:!1,clickUnblock:!0,bgPath:window.jQuery_msg.bgPath||"",content:window.jQuery_msg.content||"Please wait..."};t=jQuery.extend({},window.jQuery_msg,t),jQuery.msg(t)}},success:function(t,e){var s="";jQuery("html, body").css("cursor","auto"),n.each(function(){var t=jQuery(this).data("originalCursor");jQuery(this).css("cursor",t)});try{var a=JSON.parse(e)}catch(r){}void 0!==a&&jQuery.isPlainObject(a)?(o(a),s=a.response.html):s=e,s&&""!=s&&i.target[i.method](s),i.loadingMsg&&"function"==typeof jQuery.msg&&jQuery.msg("unblock"),"function"==typeof i.callBack&&i.callBack(e)},error:function(){jQuery("html, body").css("cursor","auto"),n.each(function(){var t=jQuery(this).data("originalCursor");jQuery(this).css("cursor",t)})}})}function add(t,e,i){var n=Math.pow(10,i||2);return(Math.round(t*n)+Math.round(e*n))/n}function sub(t,e,i){var n=Math.pow(10,i||2);return(Math.round(t*n)-Math.round(e*n))/n}function countProperties(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&++e;return e}function checkFormStep(t,e){var i=!1,n=[],o=jQuery("#"+e+"Step"+t),s=o.find("input, select, textarea");return 0==s.length?!0:(s.each(function(){var t=!jQuery(this).validationEngine("validate");if(n.push(t),!i&&!t){var e={target:jQuery(this)};scrollToElement(e),i=!0}}),n.AllValuesSame()&&n[0]?!0:!1)}function dynamicSort(t){var e=1;return"-"===t[0]&&(e=-1,t=t.substr(1)),function(i,n){var o=i[t]<n[t]?-1:i[t]>n[t]?1:0;return o*e}}function dynamicSortMultiple(){var t=arguments;return function(e,i){for(var n=0,o=0,s=t.length;0===o&&s>n;)o=dynamicSort(t[n])(e,i),n++;return o}}function dirname(t){return t.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")}function basename(t,e){var i=t,n=i.charAt(i.length-1);return("/"===n||"\\"===n)&&(i=i.slice(0,-1)),i=i.replace(/^.*[\/\\]/g,""),"string"==typeof e&&i.substr(i.length-e.length)==e&&(i=i.substr(0,i.length-e.length)),i}function escapeHtml(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return"string"==typeof t?t.replace(/[&<>"']/g,function(t){return e[t]}):void 0}function readURL(t,e){if(t.files&&t.files[0]){var i=new FileReader;i.onload=function(t){e instanceof jQuery||(e=jQuery(e)),e.attr("src",t.target.result)},i.readAsDataURL(t.files[0])}}function bytesToString(t){for(var e="",i=["K","M","G","T"],n=0;t>=1024;)t/=1024,e=i[n],n++;return+t.toFixed(2)+e}!function(t){t.getMaxDays=function(){for(var t=new Date(""+this),e=28,i=t.getMonth();t.getMonth()==i;)++e,t.setDate(e);return e-1},t.addDays=function(t){this.setDate(this.getDate()+t)},t.addHours=function(t){this.setHours(this.getHours()+t)},t.addMins=function(t){this.setMinutes(this.getMinutes()+t)},t.addMonths=function(t){var e=this.getDate();this.setDate(1),this.setMonth(this.getMonth()+t),this.setDate(Math.min(e,this.getMaxDays()))},t.addYears=function(t){var e=this.getDate();this.setDate(1),this.setFullYear(this.getFullYear()+t),this.setDate(Math.min(e,this.getMaxDays()))},t.setZeroSec=function(){this.setSeconds(0),this.setMilliseconds(0)},t.getDayOfYear=function(){var t=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),e=new Date(this.getFullYear(),0,0,0,0,0),i=t-e;return Math.floor(i/24*60*60*1e3)},t.text={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},t.strToDate=function(t,e){if(e=void 0!==e&&""!=e?e:"Y-m-d H:i:s",!t){var i=new Date;return this.setTime(i.valueOf()),!0}if(t instanceof Date)return this.setTime(t.valueOf()),!0;if(t.indexOf("now")>=0){var n,o,s,a=t.replace("now",""),r=RegExp("(.*?(mins|min|hours|hour|days|day|months|month|years|year))","gi"),l=a.match(r),t=new Date;if(!(l instanceof Array))return this.setTime(t.valueOf()),!0;for(var d=0;d<l.length;d++)o=l[d],o.indexOf("mins")<0&&o.indexOf("min")<0?o.indexOf("hours")<0&&o.indexOf("hour")<0?o.indexOf("days")<0&&o.indexOf("day")<0?o.indexOf("months")<0&&o.indexOf("month")<0?o.indexOf("years")<0&&o.indexOf("year")<0||(n="addYears"):n="addMonths":n="addDays":n="addHours":n="addMins",s=parseInt(o.replace(/[^0-9+-]/g,"")),!isNaN(parseFloat(s))&&isFinite(s)&&t[n](s);return this.setTime(t.valueOf()),!0}for(var c,p,u,h,f,m,g,v,y,_=this.text.monthsShort.join(")(")+")("+this.text.months.join(")("),r=RegExp("[^0-9a-zA-Z("+_+")]+"),l=t.split(r),b=e.split(r),k=new Date,d=0;d<l.length;d++)switch(b[d]){case"M":p=this.text.monthsShort.indexOf(l[d]);break;case"F":p=this.text.months.indexOf(l[d]);break;case"d":case"j":c=parseInt(l[d],10);break;case"m":case"n":p=parseInt(l[d],10)-1;break;case"Y":case"y":u=parseInt(l[d],10),u+=u>100?0:29>u?2e3:1900;break;case"i":f=parseInt(l[d],10);break;case"s":m=parseInt(l[d],10);break;case"u":g=parseInt(l[d],10);break;case"U":v=parseInt(l[d],10);break;case"H":case"G":case"h":case"g":h=parseInt(l[d],10);break;case"A":case"a":/pm/i.test(l[d])&&12>h?h+=12:/am/i.test(l[d])&&h>=12&&(h-=12)}return y=void 0!==v?new Date(1e3*v):new Date(void 0===u?k.getFullYear():u,void 0===p?k.getMonth():p,void 0===c?k.getDate():c,void 0===h?k.getHours():h,void 0===f?k.getMinutes():f,void 0===m?k.getSeconds():m,void 0===g?k.getMilliseconds():g),""+y=="Invalid Date"&&(y=new Date),this.setTime(y.valueOf()),!0},t.dateToStr=function(t){for(var e,i=this,t=void 0!==t&&""!=t?t:"Y-m-d H:i:s",n=i.getMonth(),o=i.getDate(),s=i.getFullYear(),a=i.getDay(),r=i.getHours(),l=r>=12,d=0==(l?r-12:r)?12:d,c=i.getDayOfYear(),p=i.getMinutes(),u=i.getSeconds(),h=t.split(""),f=0;f<h.length;f++){switch(e=h[f]){case"D":e=this.text.daysShort[a];break;case"l":e=this.text.days[a];break;case"M":e=this.text.monthsShort[n];break;case"F":e=this.text.months[n];break;case"y":e=1+Math.floor(s/100);break;case"d":e=10>o?"0"+o:o;break;case"j":e=o;break;case"H":e=10>r?"0"+r:r;break;case"h":e=r;break;case"G":e=10>d?"0"+d:d;break;case"g":e=d;break;case"z":e=100>c?10>c?"00"+c:"0"+c:c;break;case"m":e=9>n?"0"+(1+n):1+n;break;case"n":e=n+1;break;case"i":e=10>p?"0"+p:p;break;case"a":e=l?"pm":"am";break;case"A":e=l?"PM":"AM";break;case"U":e=Math.floor(i.getTime()/1e3);break;case"s":e=10>u?"0"+u:u;break;case"u":e=i.getMilliseconds();break;case"w":e=a;break;case"N":e=0==a?7:a;break;case"y":e=(""+s).substr(2,2);break;case"Y":e=s}h[f]=e}return h.join("")}}(Date.prototype),Array.prototype.AllValuesSame=function(){if(this.length>0)for(var t=1;t<this.length;t++)if(this[t]!==this[0])return!1;return!0},jQuery.fn.serializeObject=function(){var t,e={};return t=this.find("input,textarea,select").serializeArray(),jQuery.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};var delayTimers={},delay=function(){return function(t,e,i){i=i||0,void 0!==delayTimers[i]&&clearTimeout(delayTimers[i]),delayTimers[i]=setTimeout(t,e)}}(),array_keys=function(t){var e=[],n=0;for(i in t)e[n++]=i;return e},array_values=function(t){var e=[],n=0;for(i in t)e[n++]=t[i];return e},array_flip=function(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&(i[t[e]]=e);return i};