;function checkForm(a,b){holdForm=!1;var c=!1,d="";if(d="","undefined"!=typeof a){var e=a.split(".");b.find("input#task").val(a),d=e[e.length-1]}switch(d){case"save":case"save2copy":case"save2new":case"apply":case"delete":case"publish":case"unpublish":case"trash":case"archive":case"checkin":c=checkFullForm(b);break;default:c=!0,b.validationEngine("detach")}return c}function checkFullForm(a){"undefined"==typeof a?a=jQuery("#adminForm"):a instanceof jQuery||(a=jQuery(a)),a.find(".fields_errors").remove();var b=a.validationEngine("validate");if(1==b)return!0;var c=a.find(".tab-content .tab-pane"),d=Joomla.JText._("JSHOP_FORM_WITH_ERRORS");return c.each(function(){var b=jQuery(this).find(".formError:not(.greenPopup)"),c=b.length,e=jQuery(this).attr("id"),f=jQuery('.nav-tabs li a[href="#'+e+'"]');if(0>=c)return!0;var g='<div class="formError" style="position: absolute; opacity: 0.87;"><div class="formErrorContent">';g+=d,g+='</div><div class="formErrorArrow"><div class="line10"></div><div class="line9"></div><div class="line8"></div><div class="line7"></div><div class="line6"></div><div class="line5"></div><div class="line4"></div><div class="line3"></div><div class="line2"></div><div class="line1"></div></div></div>',f.append('<span class="fields_errors"><span class="num">'+c+"</span>"+g+"</span>");var h=f.find(".fields_errors .num"),i=h.offsetParent().offset(),j=h.offset();"undefined"!=typeof j&&f.find(".formError").css({top:j.top-(i.top+40),left:j.left-(i.left+17)})}),!1}jQuery(document).ready(function(){jQuery("#adminForm").validationEngine("attach",{promptPosition:"topRight:0,0"})}),Joomla.submitform=function(a,b){if("undefined"==typeof b?(b=jQuery(this).closest("form[name=adminForm]"),0==b.length&&(b=jQuery("form[name=adminForm]"))):b instanceof jQuery||(b=jQuery(b)),0==b.length)return!1;var c=checkForm(a,b);if(c){if(jQuery("form").find("[data-cloner-group]").each(function(){var a=jQuery(this).attr("data-target-field");a&&jQuery(this).find("input,textarea,select").remove()}),"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave(),"undefined"!=typeof tinymce&&tinymce.triggerSave(),b.submit(),"undefined"!=typeof jQuery.msg){var d={autoUnblock:!1,bgPath:window.jQuery_msg.bgPath||"",content:window.jQuery_msg.content||"Please wait..."};d=jQuery.extend({},window.jQuery_msg,d),jQuery.msg(d)}}else holdForm=!1},Joomla.submitformAjax=function(a,b){if("undefined"==typeof b?(b=jQuery(this).closest("form[name=adminForm]"),0==b.length&&(b=jQuery("form[name=adminForm]"))):b instanceof jQuery||(b=jQuery(b)),0==b.length)return!1;if(taskName="","undefined"==typeof a||""===a)return Joomla.submitform();var d=a.split(".");taskName=d[d.length-1];var e=checkForm(a,b);if(b.find(".cktoolbar span."+taskName).addClass("spinner"),e){if("undefined"!=typeof tinyMCE&&tinyMCE.triggerSave(),"undefined"!=typeof tinymce&&tinymce.triggerSave(),jQuery.ajax({url:"index.php?return=json",cache:!1,data:b.serialize(),beforeSend:function(){},error:function(){},success:function(b){b=jQuery.parseJSON(b),b.transaction.result&&("cancel"!=d&&b.transaction.refresh&&(parent.holdForm=!1,parent.location.reload(!1)),parent.jdomAjax.closeModal());var c=b.transaction.htmlExceptions;if("undefined"!=typeof c)parent.jdomAjax.showMessages(c);else{var c=b.transaction.rawExceptions;b.transaction.result||"undefined"!=typeof c&&""!=c.trim()||(c="Unknown error"),c&&alert(c)}var d=a.replace(".","_");"function"==typeof window[d]&&window[d](b)},complete:function(){"function"==typeof jQuery.msg&&jQuery.msg("unblock")}}),"undefined"!=typeof jQuery.msg){var f={autoUnblock:!1,bgPath:window.jQuery_msg.bgPath||"",content:window.jQuery_msg.content||"Please wait..."};f=jQuery.extend({},window.jQuery_msg,f),jQuery.msg(f)}}else holdForm=!1};