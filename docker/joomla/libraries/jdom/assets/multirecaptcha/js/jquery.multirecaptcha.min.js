/*
* @name			MultiRecaptcha jQuery plugin
* @version		0.0.1
* @package		jForms
* @copyright	G. Tomaselli
* @author		Girolamo Tomaselli - http://bygiro.com - girotomaselli@gmail.com
* @license		GNU GPL v3 or later
*/
;!function(t,e,i,n){"use strict";var o="multirecaptchaByGiro",s="plugin_"+o,a={imagesSources:{clean:"https://developers.google.com/recaptcha/images/reCAPTCHA_Sample_Clean.png",red:"https://developers.google.com/recaptcha/images/reCAPTCHA_Sample_Red.png",white:"https://developers.google.com/recaptcha/images/reCAPTCHA_Sample_White.png",blackglass:"https://developers.google.com/recaptcha/images/reCAPTCHA_Sample_Black.png"},pubkey:"",theme:"clean",extraValidators:{"data-prompt-position":"bottomLeft:-10,-18"},validateClass:"validate[required] required",text:{genericerror:"Sorry, something went wrong. Try again!",btnTxt:"Click me!"},onInit:!1,onTaskA:!1,onTaskB:!1},r=function(e,n){t(i).trigger(e),this.options.$events.trigger(e),t.isFunction(n)&&n.call(this.element)},l=function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;7>i;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},d=function(e){var i=e.attr("id");if(n===i||""==i||t("#"+i).length>0){do i=l();while(t("#"+i).length>0);e.attr("id",i)}return i},c=function(e){var i=this,n=e.find(".multirecaptcha");if(n.hasClass("captchaEnabled")||n.find("#recaptcha_area").length>0)return n.addClass("captchaEnabled"),!0;var o=d(n),s=n.attr("data-multirecaptcha-pubkey")||this.options.pubkey,a=n.attr("data-multirecaptcha-theme")||this.options.theme;if(""==s)return!1;if("undefined"==typeof Recaptcha)return!1;Recaptcha.create(s,o,{theme:a,lang:this.options.lang,custom_translations:this.options.custom_translations,tabindex:0});var r=0,l=!1;do setTimeout(function(){var e=n.find("#recaptcha_area").length;if(e>0){l=!0;var o=n.addClass("captchaEnabled").find("#recaptcha_response_field");o.addClass(i.options.validateClass),t.each(i.options.extraValidators,function(t,e){o.attr(t,e)})}},4e3),r++;while(5>r&&!l);return l?!0:!1},p=function(e){var i=this,o=i.options.imagesSources;e instanceof jQuery||(e=t("form")),e.each(function(){t(this).find(".multirecaptcha").not(":last").remove();var e=t(this).find(".multirecaptcha").last();if(e.length>0){var s=e.attr("data-multirecaptcha-theme")||i.options.theme,a=o.red;n!==o[s]&&""!=o[s]&&(a=o[s]);var r='<img src="'+a+'" />';e.html(r).removeClass("captchaEnabled "+i.options.validateClass)}})},u=function(){var e=this;t("form").on("mouseover",function(){p.call(e,t("form")),t("form").off("mouseover"),u.call(e),t(this).off("mouseover"),c.call(e,t(this))})},h=function(){this.others_opts={event_initialized:o+"_initialized",event_taskA:o+"_add",event_taskB:o+"_remove",captchaContainer:null,initialized:!1,$events:t("<a/>")},this.options=t.extend({},a)};h.prototype={init:function(e){var i=this;if(!this.options.initialized){t.extend(this.options,e,this.others_opts);var o=t(".multirecaptcha, #recaptcha_area");if(o.length<=1){if(t("#recaptcha_area").length>0)return;return c.call(i,t(".multirecaptcha").closest("form")),n}var s=t("#recaptcha_area"),a=s.parent();if(s.length>0){a.addClass("multirecaptcha captchaEnabled");for(var l=s.find("#recaptcha_table"),h=["white","clean","blackglass","red"],f=0;4>f;f++)if(l.hasClass("recaptcha_theme_"+h[f])){""==a.attr("data-multirecaptcha-theme")&&a.attr("data-multirecaptcha-theme",h[f]),""==a.attr("data-multirecaptcha-pubkey")&&a.attr("data-multirecaptcha-pubkey",this.options.pubkey);break}}t(".multirecaptcha").each(function(){d(t(this))}),p.call(i,t("form")),u.call(i,t("form")),this.options.initialized=!0;var m=""!=this.id?"_"+this.id:"";r.call(this,this.options.event_initialized+m,this.options.onInit)}},destroy:function(){this.element.data(s,null)}},t.fn[o]=function(e){var i,a;if(this.data(s)instanceof h||this.data(s,new h(this)),a=this.data(s),a.element=this,n===e||"object"==typeof e)"function"==typeof a.init&&a.init(e);else{if("string"==typeof e&&"function"==typeof a[e])return i=Array.prototype.slice.call(arguments,1),a[e].apply(a,i);t.error("Method "+e+" does not exist on jQuery."+o)}}}(jQuery,window,document);